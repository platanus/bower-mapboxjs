(function(t,e,n){function o(n,r){if(!e[n]){if(!t[n]){var a="function"==typeof require&&require;if(!r&&a)return a(n,!0);if(i)return i(n,!0);throw Error("Cannot find module '"+n+"'")}var s=e[n]={exports:{}};t[n][0].call(s.exports,function(e){var i=t[n][1][e];return o(i?i:e)},s,s.exports)}return e[n].exports}for(var i="function"==typeof require&&require,r=0;n.length>r;r++)o(n[r]);return o})({1:[function(t,e){e.exports={author:"MapBox",name:"mapbox.js",description:"mapbox javascript api",version:"1.4.0",homepage:"http://mapbox.com/",repository:{type:"git",url:"git://github.com/mapbox/mapbox.js.git"},main:"index.js",dependencies:{leaflet:"0.6.4",mustache:"~0.7.2",corslite:"0.0.5",json3:"git://github.com/bestiejs/json3.git#v3.2.5a","sanitize-caja":"0.0.0"},scripts:{test:"mocha-phantomjs test/index.html"},devDependencies:{"leaflet-hash":"git://github.com/mlevans/leaflet-hash.git#b039a3aa4e2492a5c7448075172ac26769e601d6","leaflet-fullscreen":"0.0.0","uglify-js":"~2.2.5",mocha:"~1.9","expect.js":"~0.2.0",sinon:"~1.7.3","mocha-phantomjs":"~1.1.1",happen:"~0.1.3",browserify:"~2.22.0"},optionalDependencies:{},engines:{node:"*"}}},{}],2:[function(t,e){"use strict";e.exports={HTTP_URLS:["http://a.tiles.mapbox.com/v3/","http://b.tiles.mapbox.com/v3/","http://c.tiles.mapbox.com/v3/","http://d.tiles.mapbox.com/v3/"],FORCE_HTTPS:!1,HTTPS_URLS:["https://a.tiles.mapbox.com/v3/","https://b.tiles.mapbox.com/v3/","https://c.tiles.mapbox.com/v3/","https://d.tiles.mapbox.com/v3/"]}},{}],3:[function(t,e){window.L.Icon.Default.imagePath="//api.tiles.mapbox.com/mapbox.js/v"+t("./package.json").version+"/images",L.mapbox=e.exports={VERSION:t("./package.json").version,geocoder:t("./src/geocoder"),marker:t("./src/marker"),tileLayer:t("./src/tile_layer"),shareControl:t("./src/share_control"),legendControl:t("./src/legend_control"),geocoderControl:t("./src/geocoder_control"),gridControl:t("./src/grid_control"),gridLayer:t("./src/grid_layer"),markerLayer:t("./src/marker_layer"),map:t("./src/map"),config:t("./src/config"),sanitize:t("sanitize-caja"),template:t("mustache").to_html}},{"./package.json":1,"./src/config":2,"./src/geocoder":4,"./src/geocoder_control":9,"./src/grid_control":10,"./src/grid_layer":11,"./src/legend_control":8,"./src/map":13,"./src/marker":5,"./src/marker_layer":12,"./src/share_control":7,"./src/tile_layer":6,mustache:15,"sanitize-caja":14}],15:[function(t,e,n){(function(t,e){if("object"==typeof n&&n)e(n);else{var o={};e(o),"function"==typeof define&&define.amd?define(o):t.Mustache=o}})(this,function(t){function e(t,e){return b.call(t,e)}function n(t){return!e(g,t)}function o(t){return"function"==typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function r(t){return(t+"").replace(/[&<>"'\/]/g,function(t){return E[t]})}function a(t){this.string=t,this.tail=t,this.pos=0}function s(t,e){this.view=null==t?{}:t,this.parent=e,this._cache={".":this.view}}function l(){this.clearCache()}function c(e,n,i,r){function a(t){return n.render(t,i)}for(var s,l,u,h="",p=0,f=e.length;f>p;++p)switch(s=e[p],l=s[1],s[0]){case"#":if(u=i.lookup(l),"object"==typeof u||"string"==typeof u)if(y(u))for(var m=0,d=u.length;d>m;++m)h+=c(s[4],n,i.push(u[m]),r);else u&&(h+=c(s[4],n,i.push(u),r));else if(o(u)){var g=null==r?null:r.slice(s[3],s[5]);u=u.call(i.view,g,a),null!=u&&(h+=u)}else u&&(h+=c(s[4],n,i,r));break;case"^":u=i.lookup(l),(!u||y(u)&&0===u.length)&&(h+=c(s[4],n,i,r));break;case">":u=n.getPartial(l),o(u)&&(h+=u(i));break;case"&":u=i.lookup(l),null!=u&&(h+=u);break;case"name":u=i.lookup(l),null!=u&&(h+=t.escape(u));break;case"text":h+=l}return h}function u(t){for(var e,n=[],o=n,i=[],r=0,a=t.length;a>r;++r)switch(e=t[r],e[0]){case"#":case"^":i.push(e),o.push(e),o=e[4]=[];break;case"/":var s=i.pop();s[5]=e[2],o=i.length>0?i[i.length-1][4]:n;break;default:o.push(e)}return n}function h(t){for(var e,n,o=[],i=0,r=t.length;r>i;++i)e=t[i],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(n=e,o.push(e)));return o}function p(t){return[RegExp(i(t[0])+"\\s*"),RegExp("\\s*"+i(t[1]))]}function f(e,o){function r(){if(C&&!x)for(;w.length;)delete M[w.pop()];else w=[];C=!1,x=!1}if(e=e||"",o=o||t.tags,"string"==typeof o&&(o=o.split(d)),2!==o.length)throw Error("Invalid tags: "+o.join(", "));for(var s,l,c,f,g,b,T=p(o),y=new a(e),E=[],M=[],w=[],C=!1,x=!1;!y.eos();){if(s=y.pos,c=y.scanUntil(T[0]))for(var S=0,k=c.length;k>S;++S)f=c.charAt(S),n(f)?w.push(M.length):x=!0,M.push(["text",f,s,s+1]),s+=1,"\n"==f&&r();if(!y.scan(T[0]))break;if(C=!0,l=y.scan(v)||"name",y.scan(m),"="===l?(c=y.scanUntil(_),y.scan(_),y.scanUntil(T[1])):"{"===l?(c=y.scanUntil(RegExp("\\s*"+i("}"+o[1]))),y.scan(L),y.scanUntil(T[1]),l="&"):c=y.scanUntil(T[1]),!y.scan(T[1]))throw Error("Unclosed tag at "+y.pos);if(g=[l,c,s,y.pos],M.push(g),"#"===l||"^"===l)E.push(g);else if("/"===l){if(b=E.pop(),!b)throw Error('Unopened section "'+c+'" at '+s);if(b[1]!==c)throw Error('Unclosed section "'+b[1]+'" at '+s)}else if("name"===l||"{"===l||"&"===l)x=!0;else if("="===l){if(o=c.split(d),2!==o.length)throw Error("Invalid tags at "+s+": "+o.join(", "));T=p(o)}}if(b=E.pop())throw Error('Unclosed section "'+b[1]+'" at '+y.pos);return u(h(M))}var m=/\s*/,d=/\s+/,g=/\S/,_=/\s*=/,L=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,T=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===T.call(t)},E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};a.prototype.eos=function(){return""===this.tail},a.prototype.scan=function(t){var e=this.tail.match(t);if(e&&0===e.index){var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n}return""},a.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},s.make=function(t){return t instanceof s?t:new s(t)},s.prototype.push=function(t){return new s(t,this)},s.prototype.lookup=function(t){var e;if(t in this._cache)e=this._cache[t];else{for(var n=this;n;){if(t.indexOf(".")>0){e=n.view;for(var i=t.split("."),r=0;null!=e&&i.length>r;)e=e[i[r++]]}else e=n.view[t];if(null!=e)break;n=n.parent}this._cache[t]=e}return o(e)&&(e=e.call(this.view)),e},l.prototype.clearCache=function(){this._cache={},this._partialCache={}},l.prototype.compile=function(e,n){var o=this._cache[e];if(!o){var i=t.parse(e,n);o=this._cache[e]=this.compileTokens(i,e)}return o},l.prototype.compilePartial=function(t,e,n){var o=this.compile(e,n);return this._partialCache[t]=o,o},l.prototype.getPartial=function(t){return t in this._partialCache||!this._loadPartial||this.compilePartial(t,this._loadPartial(t)),this._partialCache[t]},l.prototype.compileTokens=function(t,e){var n=this;return function(i,r){if(r)if(o(r))n._loadPartial=r;else for(var a in r)n.compilePartial(a,r[a]);return c(t,n,s.make(i),e)}},l.prototype.render=function(t,e,n){return this.compile(t)(e,n)},t.name="mustache.js",t.version="0.7.3",t.tags=["{{","}}"],t.Scanner=a,t.Context=s,t.Writer=l,t.parse=f,t.escape=r;var M=new l;t.clearCache=function(){return M.clearCache()},t.compile=function(t,e){return M.compile(t,e)},t.compilePartial=function(t,e,n){return M.compilePartial(t,e,n)},t.compileTokens=function(t,e){return M.compileTokens(t,e)},t.render=function(t,e,n){return M.render(t,e,n)},t.to_html=function(e,n,i,r){var a=t.render(e,n,i);return o(r)?(r(a),void 0):a}})},{}],4:[function(t,e){"use strict";var n=t("./util"),o=t("./url"),i=t("./request");e.exports=function(t){var e,r={};return r.getURL=function(){return e},r.setURL=function(t){return e=o.jsonify(t),r},r.setID=function(t){return n.strict(t,"string"),r.setURL(o.base()+t+"/geocode/{query}.json"),r},r.setTileJSON=function(t){return n.strict(t,"object"),r.setURL(t.geocoder),r},r.queryURL=function(t){if(n.strict(t,"string"),!r.getURL())throw Error("Geocoding map ID not set");return L.Util.template(r.getURL(),{query:encodeURIComponent(t)})},r.query=function(t,e){return n.strict(t,"string"),n.strict(e,"function"),i(r.queryURL(t),function(t,o){if(o&&o.results&&o.results.length){var i={results:o.results,latlng:[o.results[0][0].lat,o.results[0][0].lon]};void 0!==o.results[0][0].bounds&&(i.bounds=o.results[0][0].bounds,i.lbounds=n.lbounds(i.bounds)),e(null,i)}else e(t||!0)}),r},r.reverseQuery=function(t,e){function n(t){return void 0!==t.lat&&void 0!==t.lng?t.lng+","+t.lat:void 0!==t.lat&&void 0!==t.lon?t.lon+","+t.lat:t[0]+","+t[1]}var o="";if(t.length&&t[0].length){for(var a=0,s=[];t.length>a;a++)s.push(n(t[a]));o=s.join(";")}else o=n(t);return i(r.queryURL(o),function(t,n){e(t,n)}),r},"string"==typeof t?-1==t.indexOf("/")?r.setID(t):r.setURL(t):"object"==typeof t&&r.setTileJSON(t),r}},{"./request":18,"./url":16,"./util":17}],6:[function(t,e){"use strict";var n=t("./util");t("./url");var o=L.TileLayer.extend({includes:[t("./load_tilejson")],options:{format:"png"},formats:["png","png32","png64","png128","png256","jpg70","jpg80","jpg90"],scalePrefix:"@2x.",initialize:function(t,e){L.TileLayer.prototype.initialize.call(this,void 0,e),this._tilejson={},e&&e.detectRetina&&L.Browser.retina&&e.retinaVersion&&(t=e.retinaVersion),e&&e.format&&n.strict_oneof(e.format,this.formats),this._loadTileJSON(t)},setFormat:function(t){return n.strict(t,"string"),this.options.format=t,this.redraw(),this},_autoScale:function(){return this.options&&L.Browser.retina&&this.options.detectRetina&&!this.options.retinaVersion&&this.options.autoscale},setUrl:null,_setTileJSON:function(t){return n.strict(t,"object"),L.extend(this.options,{tiles:t.tiles,attribution:t.attribution,minZoom:t.minzoom,maxZoom:t.maxzoom,autoscale:t.autoscale||!1,tms:"tms"===t.scheme,bounds:t.bounds&&n.lbounds(t.bounds)}),this._tilejson=t,this.redraw(),this},getTileJSON:function(){return this._tilejson},getTileUrl:function(t){var e=this.options.tiles,n=Math.floor(Math.abs(t.x+t.y)%e.length),o=e[n],i=L.Util.template(o,t);return i?i.replace(".png",(this._autoScale()?this.scalePrefix:".")+this.options.format):i},_update:function(){this.options.tiles&&L.TileLayer.prototype._update.call(this)}});e.exports=function(t,e){return new o(t,e)}},{"./load_tilejson":19,"./url":16,"./util":17}],7:[function(t,e){"use strict";var n=L.Control.extend({includes:[t("./load_tilejson")],options:{position:"topleft",url:""},initialize:function(t,e){L.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){this._tilejson=t},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","leaflet-control-mapbox-share leaflet-bar"),n=L.DomUtil.create("a","mapbox-share mapbox-icon mapbox-icon-share",e);return n.href="#",L.DomEvent.addListener(n,"click",this._shareClick,this),L.DomEvent.disableClickPropagation(e),this._map.on("mousedown",this._clickOut,this),e},_clickOut:function(){return this._popup?(this._map.removeLayer(this._popup),this._popup=null,void 0):void 0},_shareClick:function(t){function e(t){if(t.originalEvent&&"TEXTAREA"===t.originalEvent.target.nodeName){var e=t.originalEvent.target;e.focus(),e.select()}else t.originalEvent&&"#close"===t.originalEvent.target.getAttribute("href")&&this._clickOut(t);L.DomEvent.stop(t.originalEvent)}if(L.DomEvent.stop(t),this._popup)return this._clickOut(t);var n=this._tilejson||this._map._tilejson||{},o="http://twitter.com/intent/tweet?status="+encodeURIComponent(n.name+"\n"+(n.webpage||window.location)),i="https://www.facebook.com/sharer.php?u="+encodeURIComponent(this.options.url||n.webpage||window.location)+"&t="+encodeURIComponent(n.name),r="<a class='leaflet-popup-close-button' href='#close'>×</a>"+"<h3>Share this map</h3><div class='mapbox-share-buttons'><a class='mapbox-share-facebook mapbox-icon mapbox-icon-facebook' target='_blank' href='{{facebook}}'>Facebook</a><a class='mapbox-share-twitter mapbox-icon mapbox-icon-twitter' target='_blank' href='{{twitter}}'>Twitter</a></div>".replace("{{twitter}}",o).replace("{{facebook}}",i)+"<h3>Get the embed code</h3><small>Copy and paste this HTML into your website or blog.</small>"+"<textarea rows=4>{{value}}</textarea>".replace("{{value}}","&lt;iframe width='500' height='300' frameBorder='0' src='{{embed}}'&gt;&lt;/iframe&gt;".replace("{{embed}}",n.embed||window.location));this._popup=L.marker(this._map.getCenter(),{zIndexOffset:1e4,icon:L.divIcon({className:"mapbox-share-popup",iconSize:L.point(360,240),iconAnchor:L.point(180,120),html:r})}).on("mousedown",function(t){L.DomEvent.stopPropagation(t.originalEvent)}).on("click",e,this).addTo(this._map)}});e.exports=function(t,e){return new n(t,e)}},{"./load_tilejson":19}],9:[function(t,e){"use strict";var n=t("./geocoder"),o=L.Control.extend({includes:L.Mixin.Events,options:{position:"topleft",keepOpen:!1},initialize:function(t,e){L.Util.setOptions(this,e),this.geocoder=n(t)},setURL:function(t){return this.geocoder.setURL(t),this},getURL:function(){return this.geocoder.getURL()},setID:function(t){return this.geocoder.setID(t),this},setTileJSON:function(t){return this.geocoder.setTileJSON(t),this},_toggle:function(t){t&&L.DomEvent.stop(t),L.DomUtil.hasClass(this._container,"active")?(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur()):(L.DomUtil.addClass(this._container,"active"),this._input.focus(),this._input.select())},_closeIfOpen:function(){L.DomUtil.hasClass(this._container,"active")&&!this.options.keepOpen&&(L.DomUtil.removeClass(this._container,"active"),this._results.innerHTML="",this._input.blur())},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-mapbox-geocoder leaflet-bar leaflet-control"),n=L.DomUtil.create("a","leaflet-control-mapbox-geocoder-toggle mapbox-icon mapbox-icon-geocoder",e),o=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-results",e),i=L.DomUtil.create("div","leaflet-control-mapbox-geocoder-wrap",e),r=L.DomUtil.create("form","leaflet-control-mapbox-geocoder-form",i),a=L.DomUtil.create("input","",r);return n.href="#",n.innerHTML="&nbsp;",a.type="text",a.setAttribute("placeholder","Search"),L.DomEvent.addListener(r,"submit",this._geocode,this),L.DomEvent.disableClickPropagation(e),this._map=t,this._results=o,this._input=a,this._form=r,this.options.keepOpen?L.DomUtil.addClass(e,"active"):(this._map.on("click",this._closeIfOpen,this),L.DomEvent.addListener(n,"click",this._toggle,this)),e},_geocode:function(t){L.DomEvent.preventDefault(t),L.DomUtil.addClass(this._container,"searching");var e=this._map,n=L.bind(function(t,n){if(L.DomUtil.removeClass(this._container,"searching"),!t&&n&&n.results&&n.results.length){if(this._results.innerHTML="",1===n.results.length&&n.lbounds)this._map.fitBounds(n.lbounds),this._closeIfOpen();else{for(var o=0,i=Math.min(n.results.length,5);i>o;o++){for(var r=[],a=0;n.results[o].length>a;a++)n.results[o][a].name&&r.push(n.results[o][a].name);if(r.length){var s=L.DomUtil.create("a","",this._results);s.innerHTML=r.join(", "),s.href="#",function(t){L.DomEvent.addListener(s,"click",function(n){var o=t[0].bounds;e.fitBounds(L.latLngBounds([[o[1],o[0]],[o[3],o[2]]])),L.DomEvent.stop(n)})}(n.results[o])}}if(n.results.length>5){var l=L.DomUtil.create("span","",this._results);l.innerHTML="Top 5 of "+n.results.length+"  results"}}this.fire("found",n)}else this.fire("error",{error:t})},this);this.geocoder.query(this._input.value,n)}});e.exports=function(t,e){return new o(t,e)}},{"./geocoder":4}],11:[function(t,e){"use strict";var n=t("./util"),o=(t("./url"),t("./request")),i=t("./grid"),r=L.Class.extend({includes:[L.Mixin.Events,t("./load_tilejson")],options:{template:function(){return""}},_mouseOn:null,_tilejson:{},_cache:{},initialize:function(t,e){L.Util.setOptions(this,e),this._loadTileJSON(t)},_setTileJSON:function(t){return n.strict(t,"object"),L.extend(this.options,{grids:t.grids,minZoom:t.minzoom,maxZoom:t.maxzoom,bounds:t.bounds&&n.lbounds(t.bounds)}),this._tilejson=t,this._cache={},this._update(),this},getTileJSON:function(){return this._tilejson},active:function(){return!!(this._map&&this.options.grids&&this.options.grids.length)},addTo:function(t){return t.addLayer(this),this},onAdd:function(t){this._map=t,this._update(),this._map.on("click",this._click,this).on("mousemove",this._move,this).on("moveend",this._update,this)},onRemove:function(){this._map.off("click",this._click,this).off("mousemove",this._move,this).off("moveend",this._update,this)},getData:function(t,e){if(this.active()){var n=this._map,o=n.project(t.wrap()),i=256,r=4,a=Math.floor(o.x/i),s=Math.floor(o.y/i),l=n.options.crs.scale(n.getZoom())/i;return a=(a+l)%l,s=(s+l)%l,this._getTile(n.getZoom(),a,s,function(t){var n=Math.floor((o.x-a*i)/r),l=Math.floor((o.y-s*i)/r);e(t(n,l))}),this}},_click:function(t){this.getData(t.latlng,L.bind(function(e){this.fire("click",{latLng:t.latlng,data:e})},this))},_move:function(t){this.getData(t.latlng,L.bind(function(e){e!==this._mouseOn?(this._mouseOn&&this.fire("mouseout",{latLng:t.latlng,data:this._mouseOn}),this.fire("mouseover",{latLng:t.latlng,data:e}),this._mouseOn=e):this.fire("mousemove",{latLng:t.latlng,data:e})},this))},_getTileURL:function(t){var e=this.options.grids,n=(t.x+t.y)%e.length,o=e[n];return L.Util.template(o,t)},_update:function(){if(this.active()){var t=this._map.getPixelBounds(),e=this._map.getZoom(),n=256;if(!(e>this.options.maxZoom||this.options.minZoom>e))for(var o=new L.Point(Math.floor(t.min.x/n),Math.floor(t.min.y/n)),i=new L.Point(Math.floor(t.max.x/n),Math.floor(t.max.y/n)),r=this._map.options.crs.scale(e)/n,a=o.x;i.x>=a;a++)for(var s=o.y;i.y>=s;s++){var l=(a+r)%r,c=(s+r)%r;this._getTile(e,l,c)}}},_getTile:function(t,e,n,r){var a=t+"_"+e+"_"+n,s=L.point(e,n);if(s.z=t,this._tileShouldBeLoaded(s)){if(a in this._cache){if(!r)return;return"function"==typeof this._cache[a]?r(this._cache[a]):this._cache[a].push(r),void 0}this._cache[a]=[],r&&this._cache[a].push(r),o(this._getTileURL(s),L.bind(function(t,e){var n=this._cache[a];this._cache[a]=i(e);for(var o=0;n.length>o;++o)n[o](this._cache[a])},this))}},_tileShouldBeLoaded:function(t){if(t.z>this.options.maxZoom||t.z<this.options.minZoom)return!1;if(this.options.bounds){var e=256,n=t.multiplyBy(e),o=n.add(new L.Point(e,e)),i=this._map.unproject(n),r=this._map.unproject(o),a=new L.LatLngBounds([i,r]);if(!this.options.bounds.intersects(a))return!1}return!0}});e.exports=function(t,e){return new r(t,e)}},{"./grid":20,"./load_tilejson":19,"./request":18,"./url":16,"./util":17}],13:[function(t,e){"use strict";var n=(t("./util"),t("./tile_layer")),o=t("./marker_layer"),i=t("./grid_layer"),r=t("./grid_control"),a=t("./legend_control"),s=L.Map.extend({includes:[t("./load_tilejson")],options:{tileLayer:{},markerLayer:{},gridLayer:{},legendControl:{},gridControl:{}},_tilejson:{},initialize:function(t,e,s){L.Map.prototype.initialize.call(this,t,s),this.attributionControl&&this.attributionControl.setPrefix(""),this.options.tileLayer&&(this.tileLayer=n(void 0,this.options.tileLayer),this.addLayer(this.tileLayer)),this.options.markerLayer&&(this.markerLayer=o(void 0,this.options.markerLayer),this.addLayer(this.markerLayer)),this.options.gridLayer&&(this.gridLayer=i(void 0,this.options.gridLayer),this.addLayer(this.gridLayer)),this.options.gridLayer&&this.options.gridControl&&(this.gridControl=r(this.gridLayer,this.options.gridControl),this.addControl(this.gridControl)),this.options.legendControl&&(this.legendControl=a(this.options.legendControl),this.addControl(this.legendControl)),this._loadTileJSON(e)},addLayer:function(t){return"on"in t&&t.on("ready",L.bind(function(){this._updateLayer(t)},this)),L.Map.prototype.addLayer.call(this,t)},_setTileJSON:function(t){return this._tilejson=t,this._initialize(t),this},getTileJSON:function(){return this._tilejson},_initialize:function(t){if(this.tileLayer&&(this.tileLayer._setTileJSON(t),this._updateLayer(this.tileLayer)),this.markerLayer&&!this.markerLayer.getGeoJSON()&&t.data&&t.data[0]&&this.markerLayer.loadURL(t.data[0]),this.gridLayer&&(this.gridLayer._setTileJSON(t),this._updateLayer(this.gridLayer)),this.legendControl&&t.legend&&this.legendControl.addLegend(t.legend),!this._loaded){var e=t.center[2],n=L.latLng(t.center[1],t.center[0]);this.setView(n,e)}},_updateLayer:function(t){t.options&&(this.attributionControl&&this._loaded&&this.attributionControl.addAttribution(t.options.attribution),L.stamp(t)in this._zoomBoundLayers||!t.options.maxZoom&&!t.options.minZoom||(this._zoomBoundLayers[L.stamp(t)]=t),this._updateZoomLevels())}});e.exports=function(t,e,n){return new s(t,e,n)}},{"./grid_control":10,"./grid_layer":11,"./legend_control":8,"./load_tilejson":19,"./marker_layer":12,"./tile_layer":6,"./util":17}],17:[function(t,e){"use strict";e.exports={idUrl:function(t,e){-1==t.indexOf("/")?e.loadID(t):e.loadURL(t)},log:function(t){console&&"function"==typeof console.error&&console.error(t)},strict:function(t,e){if(typeof t!==e)throw Error("Invalid argument: "+e+" expected")},strict_instance:function(t,e,n){if(!(t instanceof e))throw Error("Invalid argument: "+n+" expected")},strict_oneof:function(t,e){if(-1==e.indexOf(t))throw Error("Invalid argument: "+t+" given, valid values are "+e.join(", "))},lbounds:function(t){return new L.LatLngBounds([[t[1],t[0]],[t[3],t[2]]])}}},{}],20:[function(t,e){"use strict";function n(t){return t>=93&&t--,t>=35&&t--,t-32}e.exports=function(t){return function(e,o){if(t){var i=n(t.grid[o].charCodeAt(e)),r=t.keys[i];return t.data[r]}}}},{}],14:[function(t,e){function n(t){"use strict";return/^https?/.test(t.getScheme())?""+t:"data"==t.getScheme()&&/^image/.test(t.getPath())?""+t:void 0}function o(t){return t}var i=t("./sanitizer-bundle.js");e.exports=function(t){return t?i(t,n,o):""}},{"./sanitizer-bundle.js":21}],21:[function(t,e){var n=function(){function t(t){var e=(""+t).match(f);return e?new l(c(e[1]),c(e[2]),c(e[3]),c(e[4]),c(e[5]),c(e[6]),c(e[7])):null}function e(t,e,r,a,s,c,u){var h=new l(o(t,m),o(e,m),n(r),a>0?""+a:null,o(s,d),null,n(u));return c&&("string"==typeof c?h.setRawQuery(c.replace(/[^?&=0-9A-Za-z_\-~.%]/g,i)):h.setAllParameters(c)),h}function n(t){return"string"==typeof t?encodeURIComponent(t):null}function o(t,e){return"string"==typeof t?encodeURI(t).replace(e,i):null}function i(t){var e=t.charCodeAt(0);return"%"+"0123456789ABCDEF".charAt(15&e>>4)+"0123456789ABCDEF".charAt(15&e)}function r(t){return t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/")}function a(t){if(null===t)return null;for(var e,n=r(t),o=h;(e=n.replace(o,"$1"))!=n;n=e);return n}function s(t,e){var n=t.clone(),o=e.hasScheme();o?n.setRawScheme(e.getRawScheme()):o=e.hasCredentials(),o?n.setRawCredentials(e.getRawCredentials()):o=e.hasDomain(),o?n.setRawDomain(e.getRawDomain()):o=e.hasPort();var i=e.getRawPath(),r=a(i);if(o)n.setPort(e.getPort()),r=r&&r.replace(p,"");else if(o=!!i){if(47!==r.charCodeAt(0)){var s=a(n.getRawPath()||"").replace(p,""),l=s.lastIndexOf("/")+1;r=a((l?s.substring(0,l):"")+a(i)).replace(p,"")}}else r=r&&r.replace(p,""),r!==i&&n.setRawPath(r);return o?n.setRawPath(r):o=e.hasQuery(),o?n.setRawQuery(e.getRawQuery()):o=e.hasFragment(),o&&n.setRawFragment(e.getRawFragment()),n}function l(t,e,n,o,i,r,a){this.scheme_=t,this.credentials_=e,this.domain_=n,this.port_=o,this.path_=i,this.query_=r,this.fragment_=a,this.paramCache_=null}function c(t){return"string"==typeof t&&t.length>0?t:null}var u=RegExp("(/|^)(?:[^./][^/]*|\\.{2,}(?:[^./][^/]*)|\\.{3,}[^/]*)/\\.\\.(?:/|$)"),h=RegExp(u),p=/^(?:\.\.\/)*(?:\.\.$)?/;l.prototype.toString=function(){var t=[];return null!==this.scheme_&&t.push(this.scheme_,":"),null!==this.domain_&&(t.push("//"),null!==this.credentials_&&t.push(this.credentials_,"@"),t.push(this.domain_),null!==this.port_&&t.push(":",""+this.port_)),null!==this.path_&&t.push(this.path_),null!==this.query_&&t.push("?",this.query_),null!==this.fragment_&&t.push("#",this.fragment_),t.join("")},l.prototype.clone=function(){return new l(this.scheme_,this.credentials_,this.domain_,this.port_,this.path_,this.query_,this.fragment_)},l.prototype.getScheme=function(){return this.scheme_&&decodeURIComponent(this.scheme_).toLowerCase()},l.prototype.getRawScheme=function(){return this.scheme_},l.prototype.setScheme=function(t){return this.scheme_=o(t,m),this},l.prototype.setRawScheme=function(t){return this.scheme_=t?t:null,this},l.prototype.hasScheme=function(){return null!==this.scheme_},l.prototype.getCredentials=function(){return this.credentials_&&decodeURIComponent(this.credentials_)},l.prototype.getRawCredentials=function(){return this.credentials_},l.prototype.setCredentials=function(t){return this.credentials_=o(t,m),this},l.prototype.setRawCredentials=function(t){return this.credentials_=t?t:null,this},l.prototype.hasCredentials=function(){return null!==this.credentials_},l.prototype.getDomain=function(){return this.domain_&&decodeURIComponent(this.domain_)},l.prototype.getRawDomain=function(){return this.domain_},l.prototype.setDomain=function(t){return this.setRawDomain(t&&encodeURIComponent(t))},l.prototype.setRawDomain=function(t){return this.domain_=t?t:null,this.setRawPath(this.path_)},l.prototype.hasDomain=function(){return null!==this.domain_},l.prototype.getPort=function(){return this.port_&&decodeURIComponent(this.port_)},l.prototype.setPort=function(t){if(t){if(t=Number(t),t!==(65535&t))throw Error("Bad port number "+t);this.port_=""+t}else this.port_=null;return this},l.prototype.hasPort=function(){return null!==this.port_},l.prototype.getPath=function(){return this.path_&&decodeURIComponent(this.path_)},l.prototype.getRawPath=function(){return this.path_},l.prototype.setPath=function(t){return this.setRawPath(o(t,d))},l.prototype.setRawPath=function(t){return t?(t+="",this.path_=!this.domain_||/^\//.test(t)?t:"/"+t):this.path_=null,this},l.prototype.hasPath=function(){return null!==this.path_},l.prototype.getQuery=function(){return this.query_&&decodeURIComponent(this.query_).replace(/\+/g," ")},l.prototype.getRawQuery=function(){return this.query_},l.prototype.setQuery=function(t){return this.paramCache_=null,this.query_=n(t),this},l.prototype.setRawQuery=function(t){return this.paramCache_=null,this.query_=t?t:null,this},l.prototype.hasQuery=function(){return null!==this.query_},l.prototype.setAllParameters=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e=[],n=-1;for(var o in t){var i=t[o];"string"==typeof i&&(e[++n]=o,e[++n]=i)}t=e}this.paramCache_=null;for(var r=[],a="",s=0;t.length>s;){var o=t[s++],i=t[s++];r.push(a,encodeURIComponent(""+o)),a="&",i&&r.push("=",encodeURIComponent(""+i))}return this.query_=r.join(""),this},l.prototype.checkParameterCache_=function(){if(!this.paramCache_){var t=this.query_;if(t){for(var e=t.split(/[&\?]/),n=[],o=-1,i=0;e.length>i;++i){var r=e[i].match(/^([^=]*)(?:=(.*))?$/);n[++o]=decodeURIComponent(r[1]).replace(/\+/g," "),n[++o]=decodeURIComponent(r[2]||"").replace(/\+/g," ")}this.paramCache_=n}else this.paramCache_=[]}},l.prototype.setParameterValues=function(t,e){"string"==typeof e&&(e=[e]),this.checkParameterCache_();for(var n=0,o=this.paramCache_,i=[],r=0;o.length>r;r+=2)t===o[r]?e.length>n&&i.push(t,e[n++]):i.push(o[r],o[r+1]);for(;e.length>n;)i.push(t,e[n++]);return this.setAllParameters(i),this},l.prototype.removeParameter=function(t){return this.setParameterValues(t,[])},l.prototype.getAllParameters=function(){return this.checkParameterCache_(),this.paramCache_.slice(0,this.paramCache_.length)},l.prototype.getParameterValues=function(t){this.checkParameterCache_();for(var e=[],n=0;this.paramCache_.length>n;n+=2)t===this.paramCache_[n]&&e.push(this.paramCache_[n+1]);return e},l.prototype.getParameterMap=function(){this.checkParameterCache_();for(var t={},e=0;this.paramCache_.length>e;e+=2){var n=this.paramCache_[e++],o=this.paramCache_[e++];n in t?t[n].push(o):t[n]=[o]}return t},l.prototype.getParameterValue=function(t){this.checkParameterCache_();for(var e=0;this.paramCache_.length>e;e+=2)if(t===this.paramCache_[e])return this.paramCache_[e+1];return null},l.prototype.getFragment=function(){return this.fragment_&&decodeURIComponent(this.fragment_)},l.prototype.getRawFragment=function(){return this.fragment_},l.prototype.setFragment=function(t){return this.fragment_=t?encodeURIComponent(t):null,this},l.prototype.setRawFragment=function(t){return this.fragment_=t?t:null,this},l.prototype.hasFragment=function(){return null!==this.fragment_};var f=RegExp("^(?:([^:/?#]+):)?(?://(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),m=/[#\/\?@]/g,d=/[\#\?]/g;return l.parse=t,l.create=e,l.resolve=s,l.collapse_dots=a,l.utils={mimeTypeOf:function(e){var n=t(e);return/\.html$/.test(n.getPath())?"text/html":"application/javascript"},resolve:function(e,n){return e?""+s(t(e),t(n)):""+n}},l}(),o={};if(o.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13},o.atype=o.atype,o.ATTRIBS={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"select::tabindex":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::tabindex":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::width":0},o.ATTRIBS=o.ATTRIBS,o.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},o.eflags=o.eflags,o.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,"var":0,video:0,wbr:2},o.ELEMENTS=o.ELEMENTS,o.ELEMENT_DOM_INTERFACES={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement","var":"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},o.ELEMENT_DOM_INTERFACES=o.ELEMENT_DOM_INTERFACES,o.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},o.ueffects=o.ueffects,o.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1},o.URIEFFECTS=o.URIEFFECTS,o.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},o.ltypes=o.ltypes,o.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1},o.LOADERTYPES=o.LOADERTYPES,"i"!=="I".toLowerCase())throw"I/i problem";
var i=function(t){function e(t){if(R.hasOwnProperty(t))return R[t];var e=t.match(A);if(e)return String.fromCharCode(parseInt(e[1],10));if(e=t.match(D))return String.fromCharCode(parseInt(e[1],16));if(P&&O.test(t)){P.innerHTML="&"+t+";";var n=P.textContent;return R[t]=n,n}return"&"+t+";"}function o(t,n){return e(n)}function i(t){return t.replace(j,"")}function r(t){return t.replace(U,o)}function a(t){return(""+t).replace(I,"&amp;").replace(q,"&lt;").replace(F,"&gt;").replace(B,"&#34;")}function s(t){return t.replace(z,"&amp;$1").replace(q,"&lt;").replace(F,"&gt;")}function l(t){var e={cdata:t.cdata||t.cdata,comment:t.comment||t.comment,endDoc:t.endDoc||t.endDoc,endTag:t.endTag||t.endTag,pcdata:t.pcdata||t.pcdata,rcdata:t.rcdata||t.rcdata,startDoc:t.startDoc||t.startDoc,startTag:t.startTag||t.startTag};return function(t,n){return c(t,e,n)}}function c(t,e,n){var o=p(t),i={noMoreGT:!1,noMoreEndComments:!1};h(e,o,0,i,n)}function u(t,e,n,o,i){return function(){h(t,e,n,o,i)}}function h(e,n,o,i,r){try{e.startDoc&&0==o&&e.startDoc(r);for(var a,s,l,c=o,h=n.length;h>c;){var p=n[c++],g=n[c];switch(p){case"&":N.test(g)?(e.pcdata&&e.pcdata("&"+g,r,Z,u(e,n,c,i,r)),c++):e.pcdata&&e.pcdata("&amp;",r,Z,u(e,n,c,i,r));break;case"</":(a=/^([-\w:]+)[^\'\"]*/.exec(g))?a[0].length===g.length&&">"===n[c+1]?(c+=2,l=a[1].toLowerCase(),e.endTag&&e.endTag(l,r,Z,u(e,n,c,i,r))):c=f(n,c,e,r,Z,i):e.pcdata&&e.pcdata("&lt;/",r,Z,u(e,n,c,i,r));break;case"<":if(a=/^([-\w:]+)\s*\/?/.exec(g))if(a[0].length===g.length&&">"===n[c+1]){c+=2,l=a[1].toLowerCase(),e.startTag&&e.startTag(l,[],r,Z,u(e,n,c,i,r));var _=t.ELEMENTS[l];if(_&$){var L={name:l,next:c,eflags:_};c=d(n,L,e,r,Z,i)}}else c=m(n,c,e,r,Z,i);else e.pcdata&&e.pcdata("&lt;",r,Z,u(e,n,c,i,r));break;case"<!--":if(!i.noMoreEndComments){for(s=c+1;h>s&&(">"!==n[s]||!/--$/.test(n[s-1]));s++);if(h>s){if(e.comment){var v=n.slice(c,s).join("");e.comment(v.substr(0,v.length-2),r,Z,u(e,n,s+1,i,r))}c=s+1}else i.noMoreEndComments=!0}i.noMoreEndComments&&e.pcdata&&e.pcdata("&lt;!--",r,Z,u(e,n,c,i,r));break;case"<!":if(/^\w/.test(g)){if(!i.noMoreGT){for(s=c+1;h>s&&">"!==n[s];s++);h>s?c=s+1:i.noMoreGT=!0}i.noMoreGT&&e.pcdata&&e.pcdata("&lt;!",r,Z,u(e,n,c,i,r))}else e.pcdata&&e.pcdata("&lt;!",r,Z,u(e,n,c,i,r));break;case"<?":if(!i.noMoreGT){for(s=c+1;h>s&&">"!==n[s];s++);h>s?c=s+1:i.noMoreGT=!0}i.noMoreGT&&e.pcdata&&e.pcdata("&lt;?",r,Z,u(e,n,c,i,r));break;case">":e.pcdata&&e.pcdata("&gt;",r,Z,u(e,n,c,i,r));break;case"":break;default:e.pcdata&&e.pcdata(p,r,Z,u(e,n,c,i,r))}}e.endDoc&&e.endDoc(r)}catch(b){if(b!==Z)throw b}}function p(t){var e=/(<\/|<\!--|<[!?]|[&<>])/g;if(t+="",G)return t.split(e);for(var n,o=[],i=0;null!==(n=e.exec(t));)o.push(t.substring(i,n.index)),o.push(n[0]),i=n.index+n[0].length;return o.push(t.substring(i)),o}function f(t,e,n,o,i,r){var a=g(t,e);return a?(n.endTag&&n.endTag(a.name,o,i,u(n,t,e,r,o)),a.next):t.length}function m(t,e,n,o,i,r){var a=g(t,e);return a?(n.startTag&&n.startTag(a.name,a.attrs,o,i,u(n,t,a.next,r,o)),a.eflags&$?d(t,a,n,o,i,r):a.next):t.length}function d(e,n,o,i,r,a){var l=e.length;Y.hasOwnProperty(n.name)||(Y[n.name]=RegExp("^"+n.name+"(?:[\\s\\/]|$)","i"));for(var c=Y[n.name],h=n.next,p=n.next+1;l>p&&("</"!==e[p-1]||!c.test(e[p]));p++);l>p&&(p-=1);var f=e.slice(h,p).join("");if(n.eflags&t.eflags.CDATA)o.cdata&&o.cdata(f,i,r,u(o,e,p,a,i));else{if(!(n.eflags&t.eflags.RCDATA))throw Error("bug");o.rcdata&&o.rcdata(s(f),i,r,u(o,e,p,a,i))}return p}function g(e,n){var o=/^([-\w:]+)/.exec(e[n]),i={};i.name=o[1].toLowerCase(),i.eflags=t.ELEMENTS[i.name];for(var r=e[n].substr(o[0].length),a=n+1,s=e.length;s>a&&">"!==e[a];a++)r+=e[a];if(a>=s)return void 0;for(var l=[];""!==r;)if(o=J.exec(r)){if(o[4]&&!o[5]||o[6]&&!o[7]){for(var c=o[4]||o[6],u=!1,h=[r,e[a++]];s>a;a++){if(u){if(">"===e[a])break}else e[a].indexOf(c)>=0&&(u=!0);h.push(e[a])}if(a>=s)break;r=h.join("");continue}var p=o[1].toLowerCase(),f=o[2]?_(o[3]):"";l.push(p,f),r=r.substr(o[0].length)}else r=r.replace(/^[\s\S][^a-z\s]*/,"");return i.attrs=l,i.next=a+1,i}function _(t){var e=t.charCodeAt(0);return(34===e||39===e)&&(t=t.substr(1,t.length-2)),r(i(t))}function L(e){var n,o,i=function(t,e){o||e.push(t)};return l({startDoc:function(){n=[],o=!1},startTag:function(i,r,s){if(!o&&t.ELEMENTS.hasOwnProperty(i)){var l=t.ELEMENTS[i];if(!(l&t.eflags.FOLDABLE)){var c=e(i,r);if(!c)return o=!(l&t.eflags.EMPTY),void 0;if("object"!=typeof c)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in c))throw Error("tagPolicy gave no attribs");r=c.attribs;var u,h;if("tagName"in c?(h=c.tagName,u=t.ELEMENTS[h]):(h=i,u=l),l&t.eflags.OPTIONAL_ENDTAG){var p=n[n.length-1];!p||p.orig!==i||p.rep===h&&i===h||s.push("</",p.rep,">")}l&t.eflags.EMPTY||n.push({orig:i,rep:h}),s.push("<",h);for(var f=0,m=r.length;m>f;f+=2){var d=r[f],g=r[f+1];null!==g&&void 0!==g&&s.push(" ",d,'="',a(g),'"')}s.push(">"),l&t.eflags.EMPTY&&!(u&t.eflags.EMPTY)&&s.push("</",h,">")}}},endTag:function(e,i){if(o)return o=!1,void 0;if(t.ELEMENTS.hasOwnProperty(e)){var r=t.ELEMENTS[e];if(!(r&(t.eflags.EMPTY|t.eflags.FOLDABLE))){var a;if(r&t.eflags.OPTIONAL_ENDTAG)for(a=n.length;--a>=0;){var s=n[a].orig;if(s===e)break;if(!(t.ELEMENTS[s]&t.eflags.OPTIONAL_ENDTAG))return}else for(a=n.length;--a>=0&&n[a].orig!==e;);if(0>a)return;for(var l=n.length;--l>a;){var c=n[l].rep;t.ELEMENTS[c]&t.eflags.OPTIONAL_ENDTAG||i.push("</",c,">")}n.length>a&&(e=n[a].rep),n.length=a,i.push("</",e,">")}}},pcdata:i,rcdata:i,cdata:i,endDoc:function(t){for(;n.length;n.length--)t.push("</",n[n.length-1].rep,">")}})}function v(t,e,o,i,r){if(!r)return null;try{var a=n.parse(""+t);if(a&&(!a.hasScheme()||Q.test(a.getScheme()))){var s=r(a,e,o,i);return s?""+s:null}}catch(l){return null}return null}function b(t,e,n,o,i){if(n||t(e+" removed",{change:"removed",tagName:e}),o!==i){var r="changed";o&&!i?r="removed":!o&&i&&(r="added"),t(e+"."+n+" "+r,{change:r,tagName:e,attribName:n,oldValue:o,newValue:i})}}function T(t,e,n){var o;return o=e+"::"+n,t.hasOwnProperty(o)?t[o]:(o="*::"+n,t.hasOwnProperty(o)?t[o]:void 0)}function y(e,n){return T(t.LOADERTYPES,e,n)}function E(e,n){return T(t.URIEFFECTS,e,n)}function M(e,n,o,i,r){for(var a=0;n.length>a;a+=2){var s,l=n[a],c=n[a+1],u=c,h=null;if(s=e+"::"+l,(t.ATTRIBS.hasOwnProperty(s)||(s="*::"+l,t.ATTRIBS.hasOwnProperty(s)))&&(h=t.ATTRIBS[s]),null!==h)switch(h){case t.atype.NONE:break;case t.atype.SCRIPT:c=null,r&&b(r,e,l,u,c);break;case t.atype.STYLE:if(S===void 0){c=null,r&&b(r,e,l,u,c);break}var p=[];S(c,{declaration:function(e,n){var i=e.toLowerCase(),r=H[i];r&&(k(i,r,n,o?function(e){return v(e,t.ueffects.SAME_DOCUMENT,t.ltypes.SANDBOXED,{TYPE:"CSS",CSS_PROP:i},o)}:null),p.push(e+": "+n.join(" ")))}}),c=p.length>0?p.join(" ; "):null,r&&b(r,e,l,u,c);break;case t.atype.ID:case t.atype.IDREF:case t.atype.IDREFS:case t.atype.GLOBAL_NAME:case t.atype.LOCAL_NAME:case t.atype.CLASSES:c=i?i(c):c,r&&b(r,e,l,u,c);break;case t.atype.URI:c=v(c,E(e,l),y(e,l),{TYPE:"MARKUP",XML_ATTR:l,XML_TAG:e},o),r&&b(r,e,l,u,c);break;case t.atype.URI_FRAGMENT:c&&"#"===c.charAt(0)?(c=c.substring(1),c=i?i(c):c,null!==c&&void 0!==c&&(c="#"+c)):c=null,r&&b(r,e,l,u,c);break;default:c=null,r&&b(r,e,l,u,c)}else c=null,r&&b(r,e,l,u,c);n[a+1]=c}return n}function w(e,n,o){return function(i,r){return t.ELEMENTS[i]&t.eflags.UNSAFE?(o&&b(o,i,void 0,void 0,void 0),void 0):{attribs:M(i,r,e,n,o)}}}function C(t,e){var n=[];return L(e)(t,n),n.join("")}function x(t,e,n,o){var i=w(e,n,o);return C(t,i)}var S,k,H;"undefined"!=typeof window&&(S=window.parseCssDeclarations,k=window.sanitizeCssProperty,H=window.cssSchema);var R={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:" "},A=/^#(\d+)$/,D=/^#x([0-9A-Fa-f]+)$/,O=/^[A-Za-z][A-za-z0-9]+$/,P="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):null,j=/\0/g,U=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,N=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,I=/&/g,z=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,q=/[<]/g,F=/>/g,B=/\"/g,J=RegExp("^\\s*([-.:\\w]+)(?:\\s*(=)\\s*((\")[^\"]*(\"|$)|(')[^']*('|$)|(?=[a-z][-\\w]*\\s*=)|[^\"'\\s]*))?","i"),G=3==="a,b".split(/(,)/).length,$=t.eflags.CDATA|t.eflags.RCDATA,Z={},Y={},Q=/^(?:https?|mailto|data)$/i,V={};return V.escapeAttrib=V.escapeAttrib=a,V.makeHtmlSanitizer=V.makeHtmlSanitizer=L,V.makeSaxParser=V.makeSaxParser=l,V.makeTagPolicy=V.makeTagPolicy=w,V.normalizeRCData=V.normalizeRCData=s,V.sanitize=V.sanitize=x,V.sanitizeAttribs=V.sanitizeAttribs=M,V.sanitizeWithPolicy=V.sanitizeWithPolicy=C,V.unescapeEntities=V.unescapeEntities=r,V}(o),r=i.sanitize;o.ATTRIBS["*::style"]=0,o.ELEMENTS.style=0,o.ATTRIBS["a::target"]=0,o.ELEMENTS.video=0,o.ATTRIBS["video::src"]=0,o.ATTRIBS["video::poster"]=0,o.ATTRIBS["video::controls"]=0,o.ELEMENTS.audio=0,o.ATTRIBS["audio::src"]=0,o.ATTRIBS["video::autoplay"]=0,o.ATTRIBS["video::controls"]=0,e!==void 0&&(e.exports=r)},{}],16:[function(t,e){"use strict";var n=t("./config");e.exports={isSSL:function(){return"https:"===document.location.protocol||n.FORCE_HTTPS},base:function(t){var e=this.isSSL()?n.HTTPS_URLS:n.HTTP_URLS;return void 0===t||"number"!=typeof t?e[0]:e[t%e.length]},secureFlag:function(t){return this.isSSL()?t.match(/(\?|&)secure/)?t:-1!==t.indexOf("?")?t+"&secure":t+"?secure":t},jsonify:function(t){return t.replace(/\.(geo)?jsonp(?=$|\?)/,".$1json")}}},{"./config":2}],5:[function(t,e){"use strict";function n(t){t=t||{};var e={small:[20,50],medium:[30,70],large:[35,90]},n=t["marker-size"]||"medium",o=t["marker-symbol"]?"-"+t["marker-symbol"]:"",i=(t["marker-color"]||"7e7e7e").replace("#","");return L.icon({iconUrl:r.base()+"marker/"+"pin-"+n.charAt(0)+o+"+"+i+(L.Browser.retina?"@2x":"")+".png",iconSize:e[n],iconAnchor:[e[n][0]/2,e[n][1]/2],popupAnchor:[0,-e[n][1]/2]})}function o(t,e){return L.marker(e,{icon:n(t.properties),title:t.properties&&t.properties.title||""})}function i(t,e){if(!t||!t.properties)return"";var n="";return t.properties.title&&(n+='<div class="marker-title">'+t.properties.title+"</div>"),t.properties.description&&(n+='<div class="marker-description">'+t.properties.description+"</div>"),(e||a)(n)}var r=t("./url"),a=t("sanitize-caja");e.exports={icon:n,style:o,createPopup:i}},{"./url":16,"sanitize-caja":14}],19:[function(t,e){"use strict";var n=t("./request"),o=t("./url"),i=t("./util");e.exports={_loadTileJSON:function(t){"string"==typeof t?(-1==t.indexOf("/")&&(t=o.base()+t+".json"),n(o.secureFlag(t),L.bind(function(e,n){e?(i.log("could not load TileJSON at "+t),this.fire("error",{error:e})):n&&(this._setTileJSON(n),this.fire("ready"))},this))):t&&"object"==typeof t&&this._setTileJSON(t)}}},{"./request":18,"./url":16,"./util":17}],8:[function(t,e){"use strict";var n=L.Control.extend({options:{position:"bottomright",sanitizer:t("sanitize-caja")},initialize:function(t){L.setOptions(this,t),this._legends={}},onAdd:function(){return this._container=L.DomUtil.create("div","map-legends wax-legends"),L.DomEvent.disableClickPropagation(this._container),this._update(),this._container},addLegend:function(t){return t?(this._legends[t]||(this._legends[t]=0),this._legends[t]++,this._update()):this},removeLegend:function(t){return t?(this._legends[t]&&this._legends[t]--,this._update()):this},_update:function(){if(!this._map)return this;this._container.innerHTML="";var t="none";for(var e in this._legends)if(this._legends.hasOwnProperty(e)&&this._legends[e]){var n=this._container.appendChild(document.createElement("div"));n.className="map-legend wax-legend",n.innerHTML=this.options.sanitizer(e),t="block"}return this._container.style.display=t,this}});e.exports=function(t){return new n(t)}},{"sanitize-caja":14}],10:[function(t,e){"use strict";var n=t("./util"),o=t("mustache"),i=L.Control.extend({options:{pinnable:!0,follow:!1,sanitizer:t("sanitize-caja"),touchTeaser:!0,location:!0},_currentContent:"",_pinned:!1,initialize:function(t,e){L.Util.setOptions(this,e),n.strict_instance(t,L.Class,"L.mapbox.gridLayer"),this._layer=t},setTemplate:function(t){this.options.template=t},_template:function(t,e){if(e){var n=this.options.template||this._layer.getTileJSON().template;if(n){var i={};return i["__"+t+"__"]=!0,this.options.sanitizer(o.to_html(n,L.extend(i,e)))}}},_show:function(t,e){t!==this._currentContent&&(this._currentContent=t,this.options.follow?(this._popup.setContent(t).setLatLng(e.latLng),this._map._popup!==this._popup&&this._popup.openOn(this._map)):(this._container.style.display="block",this._contentWrapper.innerHTML=t))},_hide:function(){this._pinned=!1,this._currentContent="",this._map.closePopup(),this._container.style.display="none",this._contentWrapper.innerHTML="",L.DomUtil.removeClass(this._container,"closable")},_mouseover:function(t){if(t.data?L.DomUtil.addClass(this._map._container,"map-clickable"):L.DomUtil.removeClass(this._map._container,"map-clickable"),!this._pinned){var e=this._template("teaser",t.data);e?this._show(e,t):this._hide()}},_mousemove:function(t){this._pinned||this.options.follow&&this._popup.setLatLng(t.latLng)},_navigateTo:function(t){window.top.location.href=t},_click:function(t){var e=this._template("location",t.data);if(this.options.location&&e&&0===e.search(/^https?:/))return this._navigateTo(this._template("location",t.data));if(this.options.pinnable){var n=this._template("full",t.data);!n&&this.options.touchTeaser&&L.Browser.touch&&(n=this._template("teaser",t.data)),n?(L.DomUtil.addClass(this._container,"closable"),this._pinned=!0,this._show(n,t)):this._pinned&&(L.DomUtil.removeClass(this._container,"closable"),this._pinned=!1,this._hide())}},_onPopupClose:function(){this._currentContent=null,this._pinned=!1},_createClosebutton:function(t,e){var n=L.DomUtil.create("a","close",t);return n.innerHTML="close",n.href="#",n.title="close",L.DomEvent.on(n,"click",L.DomEvent.stopPropagation).on(n,"mousedown",L.DomEvent.stopPropagation).on(n,"dblclick",L.DomEvent.stopPropagation).on(n,"click",L.DomEvent.preventDefault).on(n,"click",e,this),n},onAdd:function(t){this._map=t;var e="leaflet-control-grid map-tooltip",n=L.DomUtil.create("div",e),o=L.DomUtil.create("div","map-tooltip-content");return n.style.display="none",this._createClosebutton(n,this._hide),n.appendChild(o),this._contentWrapper=o,this._popup=new L.Popup({autoPan:!1,closeOnClick:!1}),t.on("popupclose",this._onPopupClose,this),L.DomEvent.disableClickPropagation(n).addListener(n,"mousewheel",L.DomEvent.stopPropagation),this._layer.on("mouseover",this._mouseover,this).on("mousemove",this._mousemove,this).on("click",this._click,this),n},onRemove:function(t){t.off("popupclose",this._onPopupClose,this),this._layer.off("mouseover",this._mouseover,this).off("mousemove",this._mousemove,this).off("click",this._click,this)}});e.exports=function(t,e){return new i(t,e)}},{"./util":17,mustache:15,"sanitize-caja":14}],12:[function(t,e){"use strict";var n=t("./util"),o=t("./url"),i=t("./request"),r=t("./marker"),a=L.FeatureGroup.extend({options:{filter:function(){return!0},sanitizer:t("sanitize-caja")},initialize:function(t,e){L.setOptions(this,e),this._layers={},"string"==typeof t?n.idUrl(t,this):t&&"object"==typeof t&&this.setGeoJSON(t)},setGeoJSON:function(t){this._geojson=t,this.clearLayers(),this._initialize(t)},getGeoJSON:function(){return this._geojson},loadURL:function(t){return this._request&&"abort"in this._request&&this._request.abort(),t=o.jsonify(t),this._request=i(t,L.bind(function(e,o){this._request=null,e&&"abort"!==e.type?(n.log("could not load markers at "+t),this.fire("error",{error:e})):o&&(this.setGeoJSON(o),this.fire("ready"))},this)),this},loadID:function(t){return this.loadURL(o.base()+t+"/markers.geojson")},setFilter:function(t){return this.options.filter=t,this._geojson&&(this.clearLayers(),this._initialize(this._geojson)),this},getFilter:function(){return this.options.filter},_initialize:function(t){var e,n,o=L.Util.isArray(t)?t:t.features;if(o)for(e=0,n=o.length;n>e;e++)(o[e].geometries||o[e].geometry||o[e].features)&&this._initialize(o[e]);else if(this.options.filter(t)){var i=L.GeoJSON.geometryToLayer(t,r.style),a=r.createPopup(t,this.options.sanitizer);i.feature=t,a&&i.bindPopup(a,{closeButton:!1}),this.addLayer(i)}}});e.exports=function(t,e){return new a(t,e)}},{"./marker":5,"./request":18,"./url":16,"./util":17,"sanitize-caja":14}],18:[function(t,e){var n=t("corslite"),o=t("json3"),i=t("./util").strict;e.exports=function(t,e){"use strict";function r(t,n){!t&&n&&(n="g"==n.responseText[0]?o.parse(n.responseText.substring(5,n.responseText.length-2)):o.parse(n.responseText)),e(t,n)}return i(t,"string"),i(e,"function"),n(t,r)}},{"./util":17,corslite:22,json3:23}],22:[function(t,e){function n(t,e,n){function o(t){return t>=200&&300>t||304===t}function i(){void 0===s.status||o(s.status)?e.call(s,null,s):e.call(s,s,null)}var r=!1;if(window.XMLHttpRequest===void 0)return e(Error("Browser not supported"));if(n===void 0){var a=t.match(/^\s*https?:\/\/[^\/]*/);n=a&&a[0]!==location.protocol+"//"+location.domain+(location.port?":"+location.port:"")}var s;if(!n||"object"!=typeof window.XDomainRequest&&"function"!=typeof window.XDomainRequest)s=new window.XMLHttpRequest;else{s=new window.XDomainRequest;var l=e;e=function(){if(r)l.apply(this,arguments);else{var t=this,e=arguments;setTimeout(function(){l.apply(t,e)},0)}}}return"onload"in s?s.onload=i:s.onreadystatechange=function(){4===s.readyState&&i()},s.onerror=function(t){e.call(this,t||!0,null),e=function(){}},s.onprogress=function(){},s.ontimeout=function(t){e.call(this,t,null),e=function(){}},s.onabort=function(t){e.call(this,t,null),e=function(){}},s.open("GET",t,!0),s.send(null),r=!0,s}e!==void 0&&(e.exports=n)},{}],23:[function(t,e,n){(function(t){function e(t){if("bug-string-char-index"==t)return"a"!="a"[0];var e,n='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}',o="json"==t;if(o||"json-stringify"==t||"json-parse"==t){if("json-stringify"==t||o){var i=l.stringify,s="function"==typeof i&&c;if(s){(e=function(){return 1}).toJSON=e;try{s="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(a)===r&&i(r)===r&&i()===r&&"1"===i(e)&&"[1]"==i([e])&&"[null]"==i([r])&&"null"==i(null)&&"[null,null,null]"==i([r,a,null])&&i({a:[e,!0,!1,null,"\0\b\n\f\r	"]})==n&&"1"===i(null,e)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(u){s=!1}}if(!o)return s}if("json-parse"==t||o){var h=l.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){e=h(n);var p=5==e.a.length&&1===e.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}}}}catch(u){p=!1}if(!o)return p}return s&&p}}var o,i,r,a={}.toString,s="function"==typeof define&&define.amd,l="object"==typeof n&&n;l||s?"object"==typeof JSON&&JSON?l?(l.stringify=JSON.stringify,l.parse=JSON.parse):l=JSON:s&&(l=t.JSON={}):l=t.JSON||(t.JSON={});var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(u){}if(!e("json")){var h="[object Function]",p="[object Date]",f="[object Number]",m="[object String]",d="[object Array]",g="[object Boolean]",_=e("bug-string-char-index");if(!c)var L=Math.floor,v=[0,31,59,90,120,151,181,212,243,273,304,334],b=function(t,e){return v[e]+365*(t-1970)+L((t-1969+(e=+(e>1)))/4)-L((t-1901+e)/100)+L((t-1601+e)/400)};(o={}.hasOwnProperty)||(o=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=a?o=function(t){var e=this.__proto__,n=(this.__proto__=null,t in this);return this.__proto__=e,n}:(e=n.constructor,o=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,o.call(this,t)});var T={"boolean":1,number:1,string:1,undefined:1},y=function(t,e){var n=typeof t[e];return"object"==n?!!t[e]:!T[n]};if(i=function(t,e){var n,i,r,s,l=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)o.call(i,r)&&l++;return n=i=null,l?s=2==l?function(t,e){var n,i={},r=a.call(t)==h;for(n in t)r&&"prototype"==n||o.call(i,n)||!(i[n]=1)||!o.call(t,n)||e(n)}:function(t,e){var n,i,r=a.call(t)==h;for(n in t)r&&"prototype"==n||!o.call(t,n)||(i="constructor"===n)||e(n);(i||o.call(t,n="constructor"))&&e(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],s=function(t,e){var n,r,s=a.call(t)==h,l=!s&&"function"!=typeof t.constructor&&y(t,"hasOwnProperty")?t.hasOwnProperty:o;for(n in t)s&&"prototype"==n||!l.call(t,n)||e(n);for(r=i.length;n=i[--r];l.call(t,n)&&e(n));}),s(t,e)},!e("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},M="000000",w=function(t,e){return(M+(e||0)).slice(-t)},C="\\u00",x=function(t){var e,n='"',o=0,i=t.length,r=i>10&&_;for(r&&(e=t.split(""));i>o;o++){var a=t.charCodeAt(o);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=E[a];break;default:if(32>a){n+=C+w(2,a.toString(16));break}n+=r?e[o]:_?t.charAt(o):t[o]}}return n+'"'},S=function(t,e,n,s,l,c,u){var h,_,v,T,y,E,M,C,k,H,R,A,D,O,P,j,U=e[t];try{U=e[t]}catch(N){}if("object"==typeof U&&U)if(h=a.call(U),h!=p||o.call(U,"toJSON"))"function"==typeof U.toJSON&&(h!=f&&h!=m&&h!=d||o.call(U,"toJSON"))&&(U=U.toJSON(t));else if(U>-1/0&&1/0>U){if(b){for(T=L(U/864e5),_=L(T/365.2425)+1970-1;T>=b(_+1,0);_++);for(v=L((T-b(_,0))/30.42);T>=b(_,v+1);v++);T=1+T-b(_,v),y=(U%864e5+864e5)%864e5,E=L(y/36e5)%24,M=L(y/6e4)%60,C=L(y/1e3)%60,k=y%1e3}else _=U.getUTCFullYear(),v=U.getUTCMonth(),T=U.getUTCDate(),E=U.getUTCHours(),M=U.getUTCMinutes(),C=U.getUTCSeconds(),k=U.getUTCMilliseconds();U=(0>=_||_>=1e4?(0>_?"-":"+")+w(6,0>_?-_:_):w(4,_))+"-"+w(2,v+1)+"-"+w(2,T)+"T"+w(2,E)+":"+w(2,M)+":"+w(2,C)+"."+w(3,k)+"Z"}else U=null;if(n&&(U=n.call(e,t,U)),null===U)return"null";if(h=a.call(U),h==g)return""+U;if(h==f)return U>-1/0&&1/0>U?""+U:"null";if(h==m)return x(""+U);if("object"==typeof U){for(D=u.length;D--;)if(u[D]===U)throw TypeError();if(u.push(U),H=[],O=c,c+=l,h==d){for(A=0,D=U.length;D>A;P||(P=!0),A++)R=S(A,U,n,s,l,c,u),H.push(R===r?"null":R);j=P?l?"[\n"+c+H.join(",\n"+c)+"\n"+O+"]":"["+H.join(",")+"]":"[]"}else i(s||U,function(t){var e=S(t,U,n,s,l,c,u);e!==r&&H.push(x(t)+":"+(l?" ":"")+e),P||(P=!0)}),j=P?l?"{\n"+c+H.join(",\n"+c)+"\n"+O+"}":"{"+H.join(",")+"}":"{}";return u.pop(),j}};l.stringify=function(t,e,n){var o,i,r;if("function"==typeof e||"object"==typeof e&&e)if(a.call(e)==h)i=e;else if(a.call(e)==d){r={};for(var s,l=0,c=e.length;c>l;s=e[l++],(a.call(s)==m||a.call(s)==f)&&(r[s]=1));}if(n)if(a.call(n)==f){if((n-=n%1)>0)for(o="",n>10&&(n=10);n>o.length;o+=" ");}else a.call(n)==m&&(o=10>=n.length?n:n.slice(0,10));return S("",(s={},s[""]=t,s),i,r,o,"",[])}}if(!e("json-parse")){var k,H,R=String.fromCharCode,A={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},D=function(){throw k=H=null,SyntaxError()},O=function(){for(var t,e,n,o,i,r=H,a=r.length;a>k;)switch(i=r.charCodeAt(k)){case 9:case 10:case 13:case 32:k++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=_?r.charAt(k):r[k],k++,t;case 34:for(t="@",k++;a>k;)if(i=r.charCodeAt(k),32>i)D();else if(92==i)switch(i=r.charCodeAt(++k)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=A[i],k++;break;case 117:for(e=++k,n=k+4;n>k;k++)i=r.charCodeAt(k),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||D();t+=R("0x"+r.slice(e,k));break;default:D()}else{if(34==i)break;for(i=r.charCodeAt(k),e=k;i>=32&&92!=i&&34!=i;)i=r.charCodeAt(++k);t+=r.slice(e,k)}if(34==r.charCodeAt(k))return k++,t;D();default:if(e=k,45==i&&(o=!0,i=r.charCodeAt(++k)),i>=48&&57>=i){for(48==i&&(i=r.charCodeAt(k+1),i>=48&&57>=i)&&D(),o=!1;a>k&&(i=r.charCodeAt(k),i>=48&&57>=i);k++);if(46==r.charCodeAt(k)){for(n=++k;a>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==k&&D(),k=n}if(i=r.charCodeAt(k),101==i||69==i){for(i=r.charCodeAt(++k),(43==i||45==i)&&k++,n=k;a>n&&(i=r.charCodeAt(n),i>=48&&57>=i);n++);n==k&&D(),k=n}return+r.slice(e,k)}if(o&&D(),"true"==r.slice(k,k+4))return k+=4,!0;if("false"==r.slice(k,k+5))return k+=5,!1;if("null"==r.slice(k,k+4))return k+=4,null;D()}return"$"},P=function(t){var e,n;if("$"==t&&D(),"string"==typeof t){if("@"==(_?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=O(),"]"!=t;n||(n=!0))n&&(","==t?(t=O(),"]"==t&&D()):D()),","==t&&D(),e.push(P(t));return e}if("{"==t){for(e={};t=O(),"}"!=t;n||(n=!0))n&&(","==t?(t=O(),"}"==t&&D()):D()),(","==t||"string"!=typeof t||"@"!=(_?t.charAt(0):t[0])||":"!=O())&&D(),e[t.slice(1)]=P(O());return e}D()}return t},j=function(t,e,n){var o=U(t,e,n);o===r?delete t[e]:t[e]=o},U=function(t,e,n){var o,r=t[e];if("object"==typeof r&&r)if(a.call(r)==d)for(o=r.length;o--;)j(r,o,n);else i(r,function(t){j(r,t,n)});return n.call(t,e,r)};l.parse=function(t,e){var n,o;return k=0,H=""+t,n=P(O()),"$"!=O()&&D(),k=H=null,e&&a.call(e)==h?U((o={},o[""]=n,o),"",e):n}}}s&&define(function(){return l})})(this)},{}]},{},[3]);